import{Ha as b,Na as x,P as y,V as C,Va as S,Vb as j,Wa as h,Ya as P,_b as k,ab as i,bb as a,ca as p,cb as n,da as u,gb as w,hb as f,l as v,ma as g,nb as l,pb as m,xb as _,za as s,zb as I}from"./chunk-PENWAT4E.js";var d=class o{storageKey="cart-products";memoryFallback=[];cartSubject=new v(this.loadCart());cart$=this.cartSubject.asObservable();get storage(){try{return localStorage.setItem("__test","1"),localStorage.removeItem("__test"),localStorage}catch{try{return sessionStorage.setItem("__test","1"),sessionStorage.removeItem("__test"),sessionStorage}catch{return null}}}loadCart(){if(this.storage){let e=this.storage.getItem(this.storageKey);return e?JSON.parse(e):[]}return this.memoryFallback}saveCart(e){this.storage?this.storage.setItem(this.storageKey,JSON.stringify(e)):this.memoryFallback=e,this.cartSubject.next(e)}getCart(){return this.cartSubject.getValue()}addProduct(e){let t=[...this.getCart()],r=t.find(c=>c.product.id===e.id);console.log(e),r?r.quantity++:t.push({product:e,quantity:1}),this.saveCart(t)}removeProduct(e){let t=this.getCart().filter(r=>r.product.id!==e);this.saveCart(t)}clearCart(){this.saveCart([])}getTotalItems(){return this.getCart().reduce((e,t)=>e+t.quantity,0)}decrementQuantity(e){let t=this.getCart(),r=t.find(c=>c.product.id===e);if(r){if(r.quantity>1)r.quantity--;else{let c=t.filter(T=>T.product.id!==e);this.saveCart(c);return}this.saveCart([...t])}}incrementQuantity(e){let t=this.getCart(),r=t.find(c=>c.product.id===e);r&&(r.quantity++,this.saveCart([...t]))}clear(){this.storage?this.storage.removeItem(this.storageKey):this.memoryFallback=[],this.cartSubject.next([])}static \u0275fac=function(t){return new(t||o)};static \u0275prov=y({token:o,factory:o.\u0275fac,providedIn:"root"})};function q(o,e){if(o&1&&n(0,"img",2),o&2){let t=f();h("ngSrc",t.product().urlImg+"-thumb.jpg")("priority",t.isPriority())}}function L(o,e){if(o&1&&n(0,"img",3),o&2){let t=f();h("priority",t.isPriority())}}var E=class o{product=g.required();isPriority=g(!1);cartService=C(d);addToCart(){this.cartService.addProduct(this.product()),console.log("Carrito actualizado:",this.cartService.getCart())}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=b({type:o,selectors:[["app-home-product"]],inputs:{product:[1,"product"],isPriority:[1,"isPriority"]},decls:31,vars:8,consts:[[1,"flex","flex-col","bg-white","rounded-lg","shadow-md","overflow-hidden","hover:shadow-lg","hover:-translate-y-1","transition-all"],[1,"relative","w-full","aspect-square","bg-gray-50"],["alt","Imagen del producto","fill","",1,"object-contain","object-center",3,"ngSrc","priority"],["ngSrc","/img/default-main.jpg","alt","Imagen del producto","fill","",1,"object-contain","object-center",3,"priority"],[1,"flex","flex-col","flex-grow","p-4","gap-2"],[1,"font-semibold","text-gray-800","text-sm","sm:text-base","line-clamp-2","min-h-[3rem]"],[1,"flex","items-center","gap-1"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512",1,"size-4","text-yellow-300"],["d","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"],[1,"text-gray-400","text-xs"],[1,"mt-auto"],[1,"font-bold","text-blue-700","text-lg"],["type","button",1,"w-full","mt-3","bg-blue-600","hover:bg-blue-700","text-white","py-2","rounded-md","flex","items-center","justify-center","gap-2","text-sm",3,"click"],["fill","none","stroke","currentColor","stroke-width","1.8","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M3 3h1.5l1.2 12.1A1.5 1.5 0 0 0 7.2 16.5h9.6a1.5 1.5 0 0 0 1.49-1.39L19 6H5.1"],["cx","9","cy","19","r","1"],["cx","16","cy","19","r","1"]],template:function(t,r){t&1&&(i(0,"a",0)(1,"div",1),x(2,q,1,2,"img",2)(3,L,1,1,"img",3),a(),i(4,"div",4)(5,"h4",5),l(6),a(),i(7,"div",6),p(),i(8,"svg",7),n(9,"path",8),a(),i(10,"svg",7),n(11,"path",8),a(),i(12,"svg",7),n(13,"path",8),a(),i(14,"svg",7),n(15,"path",8),a(),i(16,"svg",7),n(17,"path",8),a()(),u(),i(18,"p",9),l(19),a(),i(20,"div",10)(21,"p",11),l(22),_(23,"currency"),a(),i(24,"button",12),w("click",function(){return r.addToCart()}),p(),i(25,"svg",13),n(26,"path",14)(27,"circle",15)(28,"circle",16),a(),u(),i(29,"span"),l(30,"Add"),a()()()()()),t&2&&(S("aria-label",r.product().name),s(2),P(r.product().urlImg?2:3),s(4),m(" ",r.product().name," "),s(13),m(" ",r.product().reviews," reviews "),s(3),m(" ",I(23,5,r.product().precio_venta,"GTQ")," "))},dependencies:[k,j],encapsulation:2})};export{d as a,E as b};
