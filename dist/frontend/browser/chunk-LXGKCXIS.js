import{$a as a,Fa as P,La as p,P as C,Ta as _,Ua as w,Ub as E,V as x,Wa as u,Zb as T,_a as o,ab as c,ba as y,ca as S,eb as I,fb as g,ka as b,l as h,lb as s,mb as m,nb as j,vb as f,xa as l,xb as v}from"./chunk-JNQS4RZQ.js";var d=class i{storageKey="cart-products";memoryFallback=[];cartSubject=new h(this.loadCart());cart$=this.cartSubject.asObservable();get storage(){try{return localStorage.setItem("__test","1"),localStorage.removeItem("__test"),localStorage}catch{try{return sessionStorage.setItem("__test","1"),sessionStorage.removeItem("__test"),sessionStorage}catch{return null}}}loadCart(){if(this.storage){let t=this.storage.getItem(this.storageKey);return t?JSON.parse(t):[]}return this.memoryFallback}saveCart(t){this.storage?this.storage.setItem(this.storageKey,JSON.stringify(t)):this.memoryFallback=t,this.cartSubject.next(t)}getCart(){return this.cartSubject.getValue()}addProduct(t){let e=[...this.getCart()],r=e.find(n=>n.product.id===t.id);console.log(t),r?r.quantity++:e.push({product:t,quantity:1}),this.saveCart(e)}removeProduct(t){let e=this.getCart().filter(r=>r.product.id!==t);this.saveCart(e)}clearCart(){this.saveCart([])}getTotalItems(){return this.getCart().reduce((t,e)=>t+e.quantity,0)}decrementQuantity(t){let e=this.getCart(),r=e.find(n=>n.product.id===t);if(r){if(r.quantity>1)r.quantity--;else{let n=e.filter(H=>H.product.id!==t);this.saveCart(n);return}this.saveCart([...e])}}incrementQuantity(t){let e=this.getCart(),r=e.find(n=>n.product.id===t);r&&(r.quantity++,this.saveCart([...e]))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})};function L(i,t){if(i&1&&c(0,"img",2),i&2){let e=g();w("ngSrc",e.product().urlImg+"-thumb.jpg")}}function z(i,t){i&1&&c(0,"img",3)}function F(i,t){if(i&1&&(o(0,"del",13),s(1),f(2,"currency"),a()),i&2){let e=g();l(),m(v(2,1,e.product().previousPrice,"GTQ"))}}var k=class i{product=b.required();cartService=x(d);addToCart(){this.cartService.addProduct(this.product()),console.log("Carrito actualizado:",this.cartService.getCart())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-home-product"]],inputs:{product:[1,"product"]},decls:29,vars:9,consts:[[1,"transition-transform","hover:scale-105","h-full","bg-white","rounded-md","p-6","flex","flex-col","shadow-md","items-center","max-w-80"],[1,"relative","size-48"],["alt","Product Image","fill","",1,"object-contain","object-center",3,"ngSrc"],["ngSrc","/img/default-main.jpg","alt","Product Image","fill","",1,"object-contain","object-center"],[1,"self-start","mt-4","flex","flex-col","gap-1"],[1,"font-bold","text-lg","text-pretty"],[1,"flex","gap-2"],[1,"flex","items-center","gap-1"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512",1,"size-4","text-yellow-300"],["d","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"],[1,"border-l","border-gray-500","text-gray-500","ps-2","text-sm"],[1,"flex","gap-2","items-baseline","font-bold"],[1,"text-2xl"],[1,"text-sm","text-gray-500"],[1,"mt-5","flex","gap-2"],[1,"w-full","rounded-md","focus:ring-4","focus:ring-yellow-200","bg-gradient-to-tl","from-yellow-500","to-yellow-400","text-white","px-4","py-2","font-bold",3,"click"]],template:function(e,r){e&1&&(o(0,"a",0)(1,"div",1),p(2,L,1,1,"img",2)(3,z,1,0,"img",3),a(),o(4,"div",4)(5,"h4",5),s(6),a(),o(7,"div",6)(8,"div",7),y(),o(9,"svg",8),c(10,"path",9),a(),o(11,"svg",8),c(12,"path",9),a(),o(13,"svg",8),c(14,"path",9),a(),o(15,"svg",8),c(16,"path",9),a(),o(17,"svg",8),c(18,"path",9),a()(),S(),o(19,"p",10),s(20),a()(),o(21,"div",11)(22,"p",12),s(23),f(24,"currency"),a(),p(25,F,3,4,"del",13),a(),o(26,"div",14)(27,"button",15),I("click",function(){return r.addToCart()}),s(28," Agregar al carrito "),a()()()()),e&2&&(_("aria-label",r.product().name),l(2),u(r.product().urlImg?2:3),l(4),m(r.product().name),l(14),j(" ",r.product().reviews," reviews "),l(3),m(v(24,6,r.product().precio_venta,"GTQ")),l(2),u(r.product().previousPrice?25:-1))},dependencies:[T,E],encapsulation:2})};export{d as a,k as b};
