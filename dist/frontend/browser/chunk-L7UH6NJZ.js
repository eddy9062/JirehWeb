import{$a as n,Fa as P,La as g,P as b,Ta as w,Ua as _,Ub as k,V as S,Wa as h,Zb as E,_a as r,ab as a,ba as p,ca as u,eb as I,fb as f,ka as y,l as x,lb as m,mb as l,nb as j,vb as v,xa as s,xb as C}from"./chunk-JNQS4RZQ.js";var d=class o{storageKey="cart-products";memoryFallback=[];cartSubject=new x(this.loadCart());cart$=this.cartSubject.asObservable();get storage(){try{return localStorage.setItem("__test","1"),localStorage.removeItem("__test"),localStorage}catch{try{return sessionStorage.setItem("__test","1"),sessionStorage.removeItem("__test"),sessionStorage}catch{return null}}}loadCart(){if(this.storage){let t=this.storage.getItem(this.storageKey);return t?JSON.parse(t):[]}return this.memoryFallback}saveCart(t){this.storage?this.storage.setItem(this.storageKey,JSON.stringify(t)):this.memoryFallback=t,this.cartSubject.next(t)}getCart(){return this.cartSubject.getValue()}addProduct(t){let e=[...this.getCart()],i=e.find(c=>c.product.id===t.id);console.log(t),i?i.quantity++:e.push({product:t,quantity:1}),this.saveCart(e)}removeProduct(t){let e=this.getCart().filter(i=>i.product.id!==t);this.saveCart(e)}clearCart(){this.saveCart([])}getTotalItems(){return this.getCart().reduce((t,e)=>t+e.quantity,0)}decrementQuantity(t){let e=this.getCart(),i=e.find(c=>c.product.id===t);if(i){if(i.quantity>1)i.quantity--;else{let c=e.filter(H=>H.product.id!==t);this.saveCart(c);return}this.saveCart([...e])}}incrementQuantity(t){let e=this.getCart(),i=e.find(c=>c.product.id===t);i&&(i.quantity++,this.saveCart([...e]))}clear(){this.storage?this.storage.removeItem(this.storageKey):this.memoryFallback=[],this.cartSubject.next([])}static \u0275fac=function(e){return new(e||o)};static \u0275prov=b({token:o,factory:o.\u0275fac,providedIn:"root"})};function M(o,t){if(o&1&&a(0,"img",2),o&2){let e=f();_("ngSrc",e.product().urlImg+"-thumb.jpg")}}function q(o,t){o&1&&a(0,"img",3)}function F(o,t){if(o&1&&(r(0,"del",13),m(1),v(2,"currency"),n()),o&2){let e=f();s(),l(C(2,1,e.product().previousPrice,"GTQ"))}}var T=class o{product=y.required();cartService=S(d);addToCart(){this.cartService.addProduct(this.product()),console.log("Carrito actualizado:",this.cartService.getCart())}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-home-product"]],inputs:{product:[1,"product"]},decls:31,vars:9,consts:[[1,"transition-transform","hover:scale-105","h-full","bg-white","rounded-md","p-6","flex","flex-col","shadow-md","items-center","max-w-80"],[1,"relative","size-48"],["alt","Product Image","fill","",1,"object-contain","object-center",3,"ngSrc"],["ngSrc","/img/default-main.jpg","alt","Product Image","fill","",1,"object-contain","object-center"],[1,"self-start","mt-4","flex","flex-col","gap-2"],[1,"font-bold","text-lg","text-pretty"],[1,"flex","gap-2"],[1,"flex","items-center","gap-1"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512",1,"size-4","text-yellow-300"],["d","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"],[1,"border-l","border-gray-500","text-gray-500","ps-2","text-sm"],[1,"flex","gap-2","items-baseline","font-bold"],[1,"text-2xl"],[1,"text-sm","text-gray-500"],["type","button",1,"text-white","bg-[#3b5998]","hover:bg-[#3b5998]/90","focus:ring-4","focus:outline-none","focus:ring-[#3b5998]/50","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","inline-flex","items-center","dark:focus:ring-[#3b5998]/55","me-2","mb-2",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-white-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 4h1.5L9 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-8.5-3h9.25L19 7h-1M8 7h-.688M13 5v4m-2-2h4"],[1,"ms-3"]],template:function(e,i){e&1&&(r(0,"a",0)(1,"div",1),g(2,M,1,1,"img",2)(3,q,1,0,"img",3),n(),r(4,"div",4)(5,"h4",5),m(6),n(),r(7,"div",6)(8,"div",7),p(),r(9,"svg",8),a(10,"path",9),n(),r(11,"svg",8),a(12,"path",9),n(),r(13,"svg",8),a(14,"path",9),n(),r(15,"svg",8),a(16,"path",9),n(),r(17,"svg",8),a(18,"path",9),n()(),u(),r(19,"p",10),m(20),n()(),r(21,"div",11)(22,"p",12),m(23),v(24,"currency"),n(),g(25,F,3,4,"del",13),n(),r(26,"button",14),I("click",function(){return i.addToCart()}),p(),r(27,"svg",15),a(28,"path",16),n(),u(),r(29,"span",17),m(30,"Add"),n()()()()),e&2&&(w("aria-label",i.product().name),s(2),h(i.product().urlImg?2:3),s(4),l(i.product().name),s(14),j(" ",i.product().reviews," reviews "),s(3),l(C(24,6,i.product().precio_venta,"GTQ")),s(2),h(i.product().previousPrice?25:-1))},dependencies:[E,k],encapsulation:2})};export{d as a,T as b};
